/*! @ryanmorr/fx v0.1.0 | https://github.com/ryanmorr/fx */
"use strict";let t=0;const e=[],n={},r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/,o=/^rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*([.\d]+))?\)$/,s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,a=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,l={duration:1e3,easing:"ease-in-out"},c={all:"px",scale:"",rotate:"deg",translate:"px",opacity:"",offsetDistance:"%"},i={linear:t=>t,"ease-in":t=>Math.pow(t,1.675),"ease-out":t=>1-Math.pow(1-t,1.675),"ease-in-out":t=>.5*(Math.sin((t-.5)*Math.PI)+1)};function u(t,e,n,r){return Array.isArray(e)?e.map(((e,o)=>u(t,e,n[o],r))):e+(n-e)*t(r)}function f(t,e){const n=getComputedStyle(t);return e.includes("-")?n.getPropertyValue(e):n[e]}function d(t,e,n){e.includes("-")?t.style.setProperty(e,n):t.style[e]=n}function p(t){const e=r.exec(t);return e&&e[1]?e[1]:null}function m(t,e){return null==e?t in c?c[t]:c.all:e}function h(t){return t.toLowerCase().includes("color")}function y(t,e,n){const r=t.exec(e);return[parseInt(r[1],n),parseInt(r[2],n),parseInt(r[3],n),null==r[4]?1:parseFloat(r[4])]}function g(t){return t.startsWith("rgb")?y(o,t,10):y(s,t.replace(a,((t,e,n,r)=>e+e+n+n+r+r)),16)}function A(t,e,r,o){const s=parseFloat(r);if("none"===r||0===s)return 0;if(null==o)return s;if("scale"===e&&"%"===o)return 100*s;const a=p(r);if(o===a||"deg"===a||"rad"===a||"turn"===a)return s;const l=r+o;l in n&&n[l];const c=document.createElement(t.tagName),i=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;i.appendChild(c),c.style.position="absolute",c.style.width=100+o;const u=100/c.offsetWidth*s;return i.removeChild(c),n[l]=u}function x(t,e,n,r,o,s,a,l){if(n in r){const c=r[n],[i,u]=Array.isArray(c)?c:[null,c],f=p(u);o[a]=i?parseFloat(i):A(t,e,o[a],f),s[a]=parseFloat(u),f&&(l[e][a]=f)}else o[a]=parseFloat(o[a]),s[a]=o[a]}function F(t,e,n,r,o,s){const a="scale"===e?1:0,l=[a,a],c=function(t,e,n){const r=[n,n],o=f(t,e);if("none"!==o){const t=o.split(" ");"scale"===e&&1===t.length?r[0]=r[1]=o:t.forEach(((t,e)=>r[e]=t))}return r}(t,e,a);s[e]=[],x(t,e,e+"X",n,c,l,0,s),x(t,e,e+"Y",n,c,l,1,s),r[e]=c,o[e]=l}function b(t,e,n,r){switch(e){case"scrollTop":case"scrollLeft":t[e]=n;break;case"scale":case"translate":d(t,e,n[0]+m(e,r[0])+" "+n[1]+m(e,r[1]));break;default:h(e)?d(t,e,`rgb(${Math.floor(n[0])}, ${Math.floor(n[1])}, ${Math.floor(n[2])}, ${n[3]})`):d(t,e,n+m(e,r))}}function M(n){e.slice().forEach((t=>t(n))),t=e.length>0?requestAnimationFrame(M):0}function $(n,r,o,s){let a;const[l,c,i]=function(t,e){const n={},r={},o={};for(const s in e){const a=e[s];let[l,c]=Array.isArray(a)?a:[null,a];if(h(s))l=null==l?f(t,s):l,n[s]=g(l),r[s]=g(c);else if("scrollTop"===s||"scrollLeft"===s)l=null==l?t[s]:l,n[s]=l,r[s]=c;else if(s.startsWith("translate")||s.startsWith("scale")){const a=s.slice(0,-1);a in n||F(t,a,e,n,r,o)}else{const e=p(c);l=null==l?A(t,s,f(t,s),e)||0:parseFloat(l),n[s]=l,r[s]=parseFloat(c),o[s]=e}}return[n,r,o]}(n,r);return d=(t,e)=>{a||(a=t);const r=Math.min(t-a,o)/o;for(const t in l)b(n,t,u(s,l[t],c[t],r),i[t]);r>=1&&e()},0===t&&(t=requestAnimationFrame(M)),new Promise((t=>{const n=r=>d(r,(()=>{t();const r=e.indexOf(n);-1!==r&&e.splice(r,1)}));e.push(n)}));var d}module.exports=function(t,e){const n="string"==typeof t?document.querySelectorAll(t):t,{duration:r,easing:o}=Object.assign(l,e),s="string"==typeof o?i[o]:o;return n.nodeName?$(n,e,r,s):1===n.length?$(n[0],e,r,s):Promise.all(Array.from(n).map((t=>$(t,e,r,s))))};
